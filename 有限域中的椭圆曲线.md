# <center>有限域中的椭圆曲线</center>

## 有限域是什么
- 一个域的元素是有限的，称为有限域。  
- 有限域中**元素的个数**被称为有限域的**阶**(order)。  
- ECC中，使用素域Fp作为有限域。
    - p一定是一个素数，称为该域的模
    - 域中的元素用整数0,1,2,...,p-1表示

## 素域Fp数学运算法则(if p=5)
- 加法 
    - (2+6) mod 5 = 3
    - 满足封闭性（指相加的结果仍然在此素域中），交换律，结合律
- 减法
    - (2-6) mod 5 = 1
    - 满足封闭性（指相加的结果仍然在此素域中），交换律，结合律
- 乘法
    - (2*6) mod 5 = 2
    - 满足封闭性，交换律，结合律，分配律
- 加法逆元
    - 某元素a的相反数-a称为a的加法逆元，因为a + (-a) = 0

- 乘法逆元
    - 若某数b与某元素a相乘，结果为1，则称b为a的乘法逆元，即a*b mod p = 1

## 素域Fp中的椭圆曲线

素域中的椭圆曲线，是指椭圆曲线中的所有点都由素域中的数组成。因此，该椭圆曲线是一个离散点集，而不是实数域中连续的曲线。

![image](https://pic2.zhimg.com/80/v2-d57f93bfbf230211f73278f42dc26941_720w.jpg)

#### 数学运算
同实数域中的椭圆曲线运算一样，假设P,Q,R为素数域中的椭圆曲线三个点，数学运算定义如下：
- 点加：若P,Q,R皆满足 ![image](http://latex.codecogs.com/gif.latex?\\ax+by+c=0%20(mod%20p)),则说P+Q+R共线，且P+Q+R=0 (mod p)，即：P+Q=-R

- 数乘：![image](http://latex.codecogs.com/gif.latex?\\3*P=P+P+P)


#### 子群
###### 定义
假设椭圆曲线在有限域Fr中，P是椭圆曲线上的一点，k,l是两个整数。若满足k*P = (k mod l) * P， 则我们称：0*P, 1*P，2*P, 3*P...l*P的集合是椭圆曲线形成的群里的一个具有循环性质的子群，这里的点P叫做循环子群的生成器或者基点

###### 阶order
阶，就是一个群的点的数量。这个定义仍然是有效的，但是在循环的子群里我们可以下一个新的，与前面的定义相等的定义：子群的阶n满足的条件是n*P = 0

子群的阶和椭圆曲线是有联系的，拉格朗日定理告诉我们，子群的阶是父群的阶的因子。换句话说，如果一个椭圆曲线包含N个点，它的一个子群包含n个点，那么n是N的因子。


###### 已知基点P找子群的阶
- 使用Schoof的算法去计算椭圆曲线的阶N 。
- 找到N所有的因子。
- 对于N的每一个因子 s,计算 s*P。
- 找到最小的且满足s*P = 0 的n,n就是子群的阶。

###### 已知子群的阶找基点P
- 计算椭圆曲线的阶N。
- 选择一个阶为n的子群。n必须是素数且必须是N的因子。
- 计算辅因子h=N/n 。
- 在曲线上选择一个随机的点P。
- 计算 G=h*P 。
- 如果G是0，那么回到步骤4。否则我们就已经找到了阶为n和辅因子是h的子群的生成器/基点。

