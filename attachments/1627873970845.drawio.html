<div>
  <div class="xsj_drawio_svg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="100%" height="100%" viewBox="-0.5 -0.5 356 1261" viewbox="0 0 356 1261" class="xsj_svg_viewbox" style="max-width: 356px; max-height: 1261px;"><defs></defs><g><path d="M 187 60 L 187 93.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 98.88 L 183.5 91.88 L 187 93.63 L 190.5 91.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="0" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(156.5,16.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="60" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 62px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">Entry: <br>参数 PGCL</div></div></foreignObject></switch></g><path d="M 187 160 L 187 193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 198.88 L 183.5 191.88 L 187 193.63 L 190.5 191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="100" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(85.5,123.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="202" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 204px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">开始遍历存储状态列表，取得当前item</div></div></foreignObject></switch></g><path d="M 187 400 L 187 433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 438.88 L 183.5 431.88 L 187 433.63 L 190.5 431.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 320 L 307 360 L 187 400 L 67 360 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><g transform="translate(130.5,353.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="112" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 112px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item-&gt;lsn &lt;= PGCL ?</div></div></foreignObject></switch></g><path d="M 187 520 L 187 553.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 558.88 L 183.5 551.88 L 187 553.63 L 190.5 551.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 440 L 307 480 L 187 520 L 67 480 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><g transform="translate(116.5,466.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="140" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 142px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item-&gt;range_type == 0 &amp;&amp;<br>item-&gt;sent_hole == false?</div></div></foreignObject></switch></g><path d="M 187 620 L 187 653.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 658.88 L 183.5 651.88 L 187 653.63 L 190.5 651.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="560" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(68.5,576.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">取得空洞区间gap: [item-&gt;lsn, item-&gt;next-&gt;lsn)</div></div></foreignObject></switch></g><path d="M 187 960 L 187 993.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 998.88 L 183.5 991.88 L 187 993.63 L 190.5 991.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="900" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(68.5,909.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">更新请求状态列表状态：req_id/req_time/head_peer_pos<br>head_peer_pos = current_pos</div></div></foreignObject></switch></g><path d="M 187 280 L 187 313.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 318.88 L 183.5 311.88 L 187 313.63 L 190.5 311.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 307 240 L 347 240 L 347 1230 L 313.37 1230" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 308.12 1230 L 315.12 1226.5 L 313.37 1230 L 315.12 1233.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 200 L 307 240 L 187 280 L 67 240 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><g transform="translate(147.5,233.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="78" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 78px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item != NULL?</div></div></foreignObject></switch></g><path d="M 187 1160 L 187 1193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 1198.88 L 183.5 1191.88 L 187 1193.63 L 190.5 1191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="1100" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(140.5,1123.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="92" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 94px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item = item-&gt;next</div></div></foreignObject></switch></g><rect x="67" y="1200" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(177.5,1223.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="18" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 20px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">exit</div></div></foreignObject></switch></g><path d="M 187 760 L 187 793.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 798.88 L 183.5 791.88 L 187 793.63 L 190.5 791.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="660" width="240" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(68.5,675.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">遍历请求状态列表，取得current_pos后第一个peer_PGCL &gt;= PGCL的node，设置current_pos为此node<br>current_pos表示请求状态列表中当前被选中接受数据请求的node</div></div></foreignObject></switch></g><path d="M 187 860 L 187 893.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 898.88 L 183.5 891.88 L 187 893.63 L 190.5 891.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="800" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(88.5,823.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="196" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 196px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">生成req_id, 并发送gap给current_pos</div></div></foreignObject></switch></g><path d="M 187 1060 L 187 1093.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 187 1098.88 L 183.5 1091.88 L 187 1093.63 L 190.5 1091.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><rect x="67" y="1000" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"></rect><g transform="translate(114.5,1016.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="144" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 144px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">更新存储状图表中gap状态: <br>sent_hole = true</div></div></foreignObject></switch></g><path d="M 67 1130 L 7 1130 L 7 240 L 60.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path><path d="M 65.88 240 L 58.88 243.5 L 60.63 240 L 58.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"></path></g></svg></div>
  <div class="xsj_drawio_xml" style="display:none;">&lt;mxfile userAgent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36" version="8.5.3" editor="www.draw.io" type="device"&gt;&lt;diagram&gt;1VpLb+M2EP4tPfDQQwu9H0fJltNDWiwQFG1PhtbiWlrIokvTid1fXw5JWQ/Ku96sV5KBICGHMyT16dNo+CnIXuxOTzTd57+TDJfIMrITspfIskzHMvgfsJylxQ8dadjSIlNOjeGl+A8ro4rbHosMHzqOjJCSFfuucUOqCm9Yx5ZSSt66bp9I2V11n26xZnjZpKVu/avIWC6tgWs09t9wsc3rlU1DjezS2lkZDnmakbeWyU6QvaCEMNnanRa4BPBqXGTc6sroZWMUV+ymAEtGvKblUV2c2hg711eLM37xqksoy8mWVGmZNNaYkmOVYZjS4L3G55mQPTea3PgZM3ZWdzI9MsJNOduValTftrqSAznSjdqH2hlL6RYrL1uaYIetMHWpT5jsMKNn7kBxmbLitXv7UsWC7cWvAYo3FFbDuOmwJRVMYUcIEPdKvsH4I+WtLbRQ4qJghQILJR4KXRRzH+PD0+JZA7uBEnB5ywuGX/apgOCNP0w3wvaKKcOnL0KiRq2amupR9FT3reG15Shb3uJ07fc9IJr245DP1skXTkW+Adg4v+IFCgxoRD4KOONCFJgoWArqJSjwxNAShYGwWCjiDe4ZodgDVvJY7g9DAQp9lAQoMoXPSsy8UBQOxTxxInx4g09oiyG+3JKTdTc7RpujUtp9HEo7OqW9qSjtaLABl37h+TPdAUVEFi0Plcyu0iZyrHBWqZSDtdLpl5Pdx+NhEurZwY3UC+5BPe9xqOfp1POnop4O2wD1aFpt8Zqd91jQbClpZ7TpKH/r3V4pMDD5gUO1zknZmftTWh7w3AjtGiMS2n6g2tTXCV3ntPEZ7Q/WB/2Xt4+iEMURvPtjB4WJ8FkISwgOsbMFRomC1h2irUjHC1hXH6vwienuP8+uOPCsEYsD+4GKg2CA0JOl6GCA0PwcFQNxoeHBgQoqVl6r+oLQpjhr3VLe6j6i4A0jiv9d8w1YK2iwYsez8yrHabbeY0zXe3LQc3tv2JCZfHOkALW0zYz/4ajFsV7lzZb/oc7/yfK5bU4BEz4V7O9W+x+Y6ldX9ZYnNbPonOsOiCCXIOi0oqDbhIleHffeW1Jn7/vdExEaUZqeWw57UlTs0Jr5Axiap8oJenW/0VPdvuJvWqHRI4TcQkOPy7XcxJhQe9Dk0dz4SaakP/58fp5bbXmz9HSX2nKgRpprKqpV7x9L/JuTuHGNW5JaV4rB2b35zFF1IUtHDRLn/FAZVQC2H0gAHpLLLHeqp3BAMBtSfN9XEl9VfNuVLLfxlxZfBw6SC/hJHBQHQoMWjSgSlXAtzXUygkwVYoiHhxEKnIpkuLU0j09gUT4cL3m7s7SYXx5dIz4oY7VqvBPSqvcjR8S+Dxt5aUtd+xY+Foqk8m6AsXH2AKjIrRH1m89AMATXN7yfBpm5JQr/1oPz5dvndyWKBzo51EmhnSiCyfLEgOQAvHJQuBLc4/Q26pMuaDmC2KF4CiRXzZrPJshB8DjGKAznfKYNRn2FPZDqPqRSmpMVkoMypa7qfOGjpSucEz07K6b2svmVb/N99Z3jQ4/zS7imMSqtDQ2AESWHWlf4Jsnh0rmj5DB09Lr7Z/93SQ6m0z/OdCWErwb0NIpvlRxAF738l5J0b/7Xy07+Bw==&lt;/diagram&gt;&lt;/mxfile&gt;</div>
</div>