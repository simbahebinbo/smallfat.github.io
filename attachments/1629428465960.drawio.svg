<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="588px" height="1461px" viewBox="-0.5 -0.5 588 1461" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.114 Safari/537.36&quot; version=&quot;8.5.3&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 187 160 L 187 193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 198.88 L 183.5 191.88 L 187 193.63 L 190.5 191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="100" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,102.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="54" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">取得所有peer node的存储状态列表，存入peer_storage_status；<br />以及storage term的lsn range，存入term_range</div></div></foreignObject></switch></g><path d="M 187 480 L 187 513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 518.88 L 183.5 511.88 L 187 513.63 L 190.5 511.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="420" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(85.5,443.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="202" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 204px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">开始遍历存储状态列表，取得当前item</div></div></foreignObject></switch></g><path d="M 187 720 L 187 753.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 758.88 L 183.5 751.88 L 187 753.63 L 190.5 751.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 640 L 307 680 L 187 720 L 67 680 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(116.5,666.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="140" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 142px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item-&gt;range_type == 0 &amp;&amp;<br />item-&gt;sent_hole == false?</div></div></foreignObject></switch></g><path d="M 187 820 L 187 853.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 858.88 L 183.5 851.88 L 187 853.63 L 190.5 851.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="760" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,776.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">取得空洞区间gap: [item-&gt;lsn, item-&gt;next-&gt;lsn)</div></div></foreignObject></switch></g><path d="M 187 1160 L 187 1193.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 1198.88 L 183.5 1191.88 L 187 1193.63 L 190.5 1191.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="1100" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,1109.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">更新请求状态列表状态：req_id/req_time/head_peer_pos<br />head_peer_pos = current_pos</div></div></foreignObject></switch></g><path d="M 187 600 L 187 633.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 638.88 L 183.5 631.88 L 187 633.63 L 190.5 631.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 307 560 L 347 560 L 347 1430 L 313.37 1430" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 308.12 1430 L 315.12 1426.5 L 313.37 1430 L 315.12 1433.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 520 L 307 560 L 187 600 L 67 560 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(147.5,553.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="78" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 78px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item != NULL?</div></div></foreignObject></switch></g><path d="M 187 1360 L 187 1393.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 1398.88 L 183.5 1391.88 L 187 1393.63 L 190.5 1391.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="1300" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(140.5,1323.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="92" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 94px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">item = item-&gt;next</div></div></foreignObject></switch></g><rect x="67" y="1400" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(177.5,1423.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="18" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 20px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">exit</div></div></foreignObject></switch></g><path d="M 187 960 L 187 993.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 998.88 L 183.5 991.88 L 187 993.63 L 190.5 991.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="860" width="240" height="100" rx="15" ry="15" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,875.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="68" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">遍历请求状态列表，取得current_pos后第一个peer_storage_status包含gap区间的peer，设置current_pos为此node<br />current_pos表示请求状态列表中当前被选中接受数据请求的node</div></div></foreignObject></switch></g><path d="M 187 1060 L 187 1093.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 1098.88 L 183.5 1091.88 L 187 1093.63 L 190.5 1091.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="1000" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,1016.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">生成req_id, 并发送gap给current_pos指向的peer</div></div></foreignObject></switch></g><path d="M 187 1260 L 187 1293.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 1298.88 L 183.5 1291.88 L 187 1293.63 L 190.5 1291.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="1200" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(114.5,1216.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="144" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 144px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">更新存储状态表中gap状态: <br />sent_hole = true</div></div></foreignObject></switch></g><path d="M 67 1330 L 7 1330 L 7 560 L 60.63 560" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 65.88 560 L 58.88 563.5 L 60.63 560 L 58.88 556.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 60 L 187 93.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 98.88 L 183.5 91.88 L 187 93.63 L 190.5 91.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="0" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(78.5,9.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="216" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 216px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">Entry: <br />参数 <br />consistency_term/[term_lsn1, term_lsn2]</div></div></foreignObject></switch></g><path d="M 187 280 L 187 313.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 318.88 L 183.5 311.88 L 187 313.63 L 190.5 311.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(183.5,294.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="7" height="11" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">Y</div></div></foreignObject></switch></g><path d="M 307 240 L 340.63 240" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 345.88 240 L 338.88 243.5 L 340.63 240 L 338.88 236.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 200 L 307 240 L 187 280 L 67 240 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(68.5,226.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">当前term的end_lsn &lt;= 其他node同一term的end_lsn?</div></div></foreignObject></switch></g><path d="M 187 380 L 187 413.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 187 418.88 L 183.5 411.88 L 187 413.63 L 190.5 411.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="67" y="320" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(68.5,329.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="40" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">设置尝试补齐点：在存储状态列表末尾加入节点：term_lsn2，且前一个节点range_type = 0</div></div></foreignObject></switch></g><path d="M 467 270 L 467 313.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 467 318.88 L 463.5 311.88 L 467 313.63 L 470.5 311.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="347" y="210" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(389.5,233.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="154" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 154px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">截断wal （调用主模块接口）</div></div></foreignObject></switch></g><path d="M 347 350 L 313.37 350" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 308.12 350 L 315.12 346.5 L 313.37 350 L 315.12 353.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><rect x="347" y="320" width="240" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="none"/><g transform="translate(348.5,336.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="236" height="26" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 236px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">调整存储状态列表：end_lsn = peer_end_lsn</div></div></foreignObject></switch></g></g></svg>