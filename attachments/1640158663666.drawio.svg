<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="796px" height="708px" viewBox="-0.5 -0.5 796 708" content="&lt;mxfile userAgent=&quot;Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.45 Safari/537.36&quot; version=&quot;8.5.3&quot; editor=&quot;www.draw.io&quot; type=&quot;device&quot;&gt;&lt;diagram&gt;7VpLc6M4EP41rto9TIo3+JjEycxhtmpqc9jdU0oGYatGRpQQib2/flsgnjKB2Hg8NZscZlAjWqK/r1/CC/t+t//MUbr9g0WYLiwj2i/s1cKyTMP24D8pOZQS1/NLwYaTSE1qBE/kX1w9qaQ5iXDWmSgYo4KkXWHIkgSHoiNDnLPX7rSY0e6qKdpgTfAUIqpL/yKR2JbSwDUa+RdMNttqZdNQd3aomqwE2RZF7LUlsh8W9j1nTJRXu/09ptJ4lV3K5x4H7tYb4zgRUx7wgvKJF0Rz9XIL+3aNMgzCNQq/56kyrtqvOFRGgK2n8jLf0a8kxpQkMLpLMSc7LDCHO1SJvzWyu9ctEfgpRaF89BXoAbKt2FEYmXAJiAkEj/B6TClKM7IuVjVAwnGY84y84D9xVhJDSlku5Er3NeBSqBtD2ecFc4H3LZEyzmfMYJ/8AFPU3UDhpIjqqOFrg3qN7baFuOcrIVJM29SaGzDgQuExgM1SwybkGAkJTYazjLBEA6VlSvmSBDh7S8kmAdmaCcF2cAMn0a10AimjLPxeiGBvfyuzFYN/5ODGDKxKsNq3b68O7VEL4AHDVzzDUcezdLu3LFvZnmOKBADedeMjhlXavjECy9YQul0Igx4yGct5iNUzbU/pqbE8t6PHD24MIzDqP6erViC+wUJTW2Bev+4kGlRUarvoG7CncsliE+7dwl31XJJxsWUbliDadsphvKZ7itMzzzFP0R3FdWZwFN8ct1ArWq1wJjg7jAcjOe17HeHtmQxldw3l+Z5mKfuIpew5DGUdi/YpEAEVO0wgU8/NrYE0gWRwIikq7EjRGioE+y6G6P+IdoRK23zB9AXLCKZuqDLAtNT4nlHGiy3apQeCHKlYFwI+5eoFhMemxoTSljwu/gbzy3hemiHZTMk2zqWyTUXDazhRzcvJpnKv6ERHS6ZMMI6HXOh/USq51om1Uj8jnwSKXitdPkn65ybJqVnSniNLBnqWTJggsdxeSEnxVrcLy0M7SbRknaXFS3sU5HdrDlcbUUo6M8RW0j7t8t9AUcTfAmBKccpSnJQSFfoDOdoTUReqcF3WqUv3LQ6PFp1nVphmL6Vb9rKrYqAY1BTZfX70FQ0UqydUlYFeCmRgadmUI4HOha7qK06H5AJ9QK+Ad017knFH4dYUzVf7B7aG0sVbwE/Q9nW7QAOy6wldYOWqZsdVHTVqNMnBoTUY7yavR6I+9rZ1Yjvpek5f0Y1pLpu/i1HKGXL8V6Qf8vwSfu913dU92e9HFM0IkquBVGI0k9MfTa1XzJ9dX7B8/8adKYPqqmbMoXrL9DOjpEwE8R2mWB0zfTIvEh3dpXUajG519jmkaNRnq4ksjjN8NtC+BrSG7aV64/f3YW43TPnmj+uNg2u0Ye+2UD9ImOa0NsxczmCipX6cG24ZKz64oET+84IIRbKL19qqniWlxz+pYWOsh0ba5lp1NEZxLNu4DEhJks3XYrSyjqdxzvIkwlG7yKsLuro8vGbmsHvnQKbfUzEQJ+BF0aE1TRFxeJ3eyVy1ToN5qXHgaa/39LK3y/kKh+WRhmGLAUz57XH/HNM82wLszzSTVKt7edXZG8XcwhjPQAFABpKY/fhBPD1B+d0g67iXIZ5nmEfXmUY8N+g93XePGYmntxUlmJZRkO638lih/LRuGes8Bo0Z5Xk9iDgrvjXL0Pf7B+XGKWdMaz3PppxhnEO5foM8I+X0JoljkXMZ2WLIoViW4iSuGIij90S9eUr3CMl1axr9FN2W28tGjj/tkFGv9p0RRTNCrXdaedKJLx8BYzRg1EdOFw4Y1TqnBQw3cC7GIr2Nk1+Bi8If6n5LBjqDyBCxp2wjtxDLngPAYxkpo8KkWPFBPY161rQzt7Opp9Y5kXrOxQ70lvpH4/ogv27yGm4tLNBobJgoiIW4eFbiR2BDdf3BuhHW2e6PqZCqdU5jnd3/9cbJrINh88vRcnrz+1v74T8=&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><rect x="0" y="0" width="100" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 50 40 L 50 670" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(2.5,14.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="94" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 95px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">:base backup tool</div></div></foreignObject></switch></g><path d="M 50 80 L 256.88 78.08" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 263.88 78.02 L 256.91 81.58 L 256.85 74.58 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(118.5,63.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="78" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">create session</div></div></foreignObject></switch></g><rect x="45" y="70" width="10" height="540" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 65 676 L 35 706 M 35 676 L 65 706" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><rect x="200" y="0" width="140" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 270 40 L 270 670" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(232.5,14.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="74" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;">:primary node</div></div></foreignObject></switch></g><path d="M 285 676 L 255 706 M 255 676 L 285 706" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><rect x="440" y="0" width="100" height="40" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 490 40 L 490 680" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><g transform="translate(459.5,14.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="60" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 12px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; width: 61px; white-space: nowrap; overflow-wrap: normal; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;white-space:normal;">:store node</div></div></foreignObject></switch></g><rect x="485" y="270" width="10" height="340" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 265 199 L 57.24 199" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 65.12 194.5 L 56.12 199 L 65.12 203.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(102.5,168.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="114" height="27" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">notify client: <br /> the pstore node addr</div></div></foreignObject></switch></g><path d="M 485 473 L 63.12 473" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 56.12 473 L 63.12 469.5 L 63.12 476.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(243.5,457.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="53" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">send data</div></div></foreignObject></switch></g><path d="M 55 280 L 475.88 280.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 482.88 280.12 L 475.88 283.62 L 475.88 276.62 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(230.5,264.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="78" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">create session</div></div></foreignObject></switch></g><path d="M 486 513 L 64.12 513" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 57.12 513 L 64.12 509.5 L 64.12 516.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(247.5,497.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="47" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">send wal</div></div></foreignObject></switch></g><path d="M 265 237.5 L 56.24 237.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 64.12 233 L 55.12 237.5 L 64.12 242" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(126.5,222.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">end session</div></div></foreignObject></switch></g><path d="M 489 552 L 57.24 552" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 65.12 547.5 L 56.12 552 L 65.12 556.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(287.5,535.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="64" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">end session</div></div></foreignObject></switch></g><path d="M 506 676 L 476 706 M 476 676 L 506 706" fill="none" stroke="#000000" stroke-width="3" stroke-miterlimit="10" pointer-events="none"/><rect x="265" y="70" width="10" height="190" fill="#ffffff" stroke="#000000" pointer-events="none"/><path d="M 275 131 L 300 131 L 300 151 L 288.12 151" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 281.12 151 L 288.12 147.5 L 288.12 154.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(303.5,132.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="173" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">choose an available pstore node</div></div></foreignObject></switch></g><path d="M 496 411 L 521 411 L 521 431 L 509.12 431" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 502.12 431 L 509.12 427.5 L 509.12 434.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(524.5,412.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="253" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">check max_flushing_lsn &gt; checkpoint_location?</div></div></foreignObject></switch></g><path d="M 496 360 L 521 360 L 521 380 L 509.12 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 502.12 380 L 509.12 376.5 L 509.12 383.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(524.5,361.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="238" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">block flush(data page buf/slru buf/drop table)</div></div></foreignObject></switch></g><path d="M 480 439 L 62.24 439" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="none"/><path d="M 70.12 434.5 L 61.12 439 L 70.12 443.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(141.5,423.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="256" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: center;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">return failed if flushed_lsn &gt; checkpoint_location</div></div></foreignObject></switch></g><path d="M 496 524 L 521 524 L 521 544 L 509.12 544" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 502.12 544 L 509.12 540.5 L 509.12 547.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(524.5,525.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="70" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">unblock flush</div></div></foreignObject></switch></g><path d="M 496 483 L 521 483 L 521 503 L 509.12 503" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 502.12 503 L 509.12 499.5 L 509.12 506.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(524.5,484.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="265" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">fill with 0 in xlog after position checkpoint_location</div></div></foreignObject></switch></g><path d="M 496 310 L 521 310 L 521 330 L 509.12 330" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 502.12 330 L 509.12 326.5 L 509.12 333.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(524.5,311.5)"><switch><foreignObject style="overflow:visible;" pointer-events="all" width="270" height="12" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: inline-block; font-size: 11px; font-family: Helvetica; color: rgb(0, 0, 0); line-height: 1.2; vertical-align: top; white-space: nowrap; text-align: left;" class="xsj_foreignObject xsj_drawio_foreignObject"><div xmlns="http://www.w3.org/1999/xhtml" style="display:inline-block;text-align:inherit;text-decoration:inherit;background-color:#ffffff;">create pstore checkpoint, got start_point/end_point</div></div></foreignObject></switch></g></g></svg>